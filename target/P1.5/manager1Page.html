<!DOCTYPE html>
<html lang="en">

<head>
    <title>#1 USED DEALER</title>
    <link href="https://fonts.googleapis.com/css2?family=Notable&display=swap" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="managerStyle.css" />
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css"
        integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"
        integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI"
        crossorigin="anonymous"></script>

    <script>
        var car = [];
        function getAllCars() {
            var xhttp = new XMLHttpRequest();
            xhttp.onreadystatechange = function () {
                if (this.readyState == 4 && this.status > 199) {
                    document.querySelectorAll("#carTable tbody tr")
                        .forEach(function (item) { item.remove() });

                    car = JSON.parse(this.responseText);
                    console.log(car, "Im here")
                    let table = document.querySelector("#carTable");

                    for (let i = 0; i < car.length; ++i) {
                        let row = table.insertRow(table.rows.length);

                        let yearCell = row.insertCell(0);
                        yearCell.innerHTML = car[i].year;

                        let makeCell = row.insertCell(1);
                        makeCell.innerHTML = car[i].make;

                        let modelCell = row.insertCell(2);
                        modelCell.innerHTML = car[i].model;
                    }
                }
            };

            xhttp.open("GET", "http://localhost:10080/P1.5/service/car/all", true);
            xhttp.send();
        }
    </script>

</head>

<body>
    <header>
        <div class="main">
            <div class="logo">
                <img src="logo.png" />
            </div>
            <ul>
                <li class="active">><a href="#">Home</a></li>
                <li><a href="#">Recent Transactions</a></li>
                <li><a href="#">ADD Vehicle</a></li>
                <li><a href="#">Delete Vehicle</a></li>
                <li><a href="#">Back to log-in</a></li>
            </ul>
        </div>
        <div class="title">
            <h1>#1 USED DEALER</h1>
        </div>

        <div class="button">

            <form action="getcars" method="get">

                <input type="submit" class="btn btn-primary" value="View inventory">
                <!--      <a href="#" class="btn">View Inventory</a> -->
            </form>

        </div>
    </header>

    <div class="table-responsive">
        <input class="btn btn-primary" type="button" onClick="getAllCars()" value="Get All Cars" />
        <table class="table table-dark" id="carTable">
            <thead>
                <tr>
                    <td scope="col">Year</td>
                    <td scope="col">Make</td>
                    <td scope="col">Model</td>
                </tr>
            </thead>
            <tbody>

            </tbody>
        </table>
    </div>

</body>

</html>